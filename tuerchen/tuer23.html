<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Kreuzvalidierung in R</title>
        <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                background: url('background.jpeg');
                background-size: cover;
                background-position: center center;
                background-repeat: no-repeat;
                background-attachment: fixed;
                font-family: 'Quicksand', sans-serif;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 20px;
                color: #ffffff;
                overflow-x: hidden;
            }

            .snow {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                pointer-events: none;
                z-index: 1;
            }

            .snowflake {
                position: absolute;
                background: white;
                border-radius: 50%;
                opacity: 0.8;
                animation: fall linear infinite;
            }

            @keyframes fall {
                to {
                    transform: translateY(100vh) rotate(720deg);
                }
            }

            .content {
                position: relative;
                z-index: 2;
                text-align: center;
                max-width: 800px;
                padding: 20px;
                background: rgba(0, 0, 0, 0.656);
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            }

            h1 {
                color: #E0E7FF;
                font-size: 2em;
                font-weight: 700;
                text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
                margin-bottom: 20px;
            }

            p {
                color: #c9ddf7;
                font-size: 1.2em;
                font-weight: 400;
                margin-bottom: 10px;
                text-align: left;
            }

            ul {
                color: #c9ddf7;
                font-size: 1em;
                font-weight: 400;
                margin-left: 40px;
                margin-bottom: 20px;
                text-align: left;
            }

            li {
                margin-bottom: 10px;
            }

            .navigation {
                display: flex;
                gap: 20px;
                justify-content: center;
                margin-top: 20px;
            }

            .nav-button {
                padding: 10px 20px;
                font-size: 1.2em;
                color: #E0E7FF;
                text-decoration: none;
                background: rgba(255, 255, 255, 0.2);
                border: none;
                border-radius: 10px;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .nav-button:hover {
                background: rgba(255, 255, 255, 0.5);
                transform: scale(1.05);
            }

            .nav-button:disabled {
                opacity: 0.5;
                cursor: not-allowed;
                transform: none;
            }

            .page {
                display: none;
            }

            .page.active {
                display: block;
            }

            pre {
                background-color: #d8d8d814;
                border: 1px solid #ddd;
                border-radius: 4px;
                padding: 10px;
                font-family: 'Courier New', monospace;
                white-space: pre-wrap;
                word-wrap: break-word;
                text-align: left;
                margin: 10px 0;
                font-size: 0.8em;
                line-height: 1.4;
            }
        </style>
    </head>
    <body>
        <div class="snow" id="snowContainer"></div>
        <div class="content">
            <div class="page active" data-page="1">
                <h1>Türchen 23: 10-fache Kreuzvalidierung</h1>
                <p>Heyyy, heute geht es kurz um das Prinzip der 10-fachen Kreuzvalidierung. Hier  wird ein Datensatz in 10 gleich große Teile ("Folds") aufgeteilt unnnd ein Teil wird zum Testen verwendet, während die anderen 9 zum Trainieren genutzt werden. Das wird dann 10-mal wiederholt, wobei jedes Mal ein anderer Fold als Testdaten verwendet wird.
                    Jaa und das kann man ganz gut so beispielhaft in R umsetzen alsooo, wir wollen zuerst einen Datensatz mit 100 Punkten (Das entspricht den Indexen 1-100) generieren, bei dem jeder Eintrag einem der 10 Folds zugeordnet werden soll.
                </p>
                <p>Tipps:</p>
                <ul>
                    <li>benutze <code>sample</code>, um die Reihenfolge der Folds zufällig zu mischen</li>
                    <li>benutze <code>rep</code>, um die Zahlen 1 bis 10 gleichmäßig zu wiederholen</li>
                </ul>
            </div>

            <div class="page" data-page="2">
                <h1>10-fache Kreuzvalidierung - Seite 2</h1>
                <p>Lösung:</p>
                <pre>
n = 100      # Beispiel: 100 Datenpunkte
folds = sample(rep(1:10, length.out = n))
print(folds)  # Zeigt, welchem Fold jeder Datenpunkt zugeordnet wurde
                </pre>
                <p>Jaa die kurze Erklärung ist:</p>
                <ul>
                    <li>Mit <code>rep(1:10, length.out = n)</code> werden die Zahlen 1 bis 10 gleichmäßig über 100 Einträge verteilt.</li>
                    <li><code>sample</code> mischt diese Reihenfolge zufällig.</li>
                </ul>
                <p>Wir haben jetzt also für jeden unserer Datenpunke (Indexe 1-100) eine Fold Zahl.
                    Wenn wir jetzt ein Modell trainieren würden, würden wir im ersten Schritt nur die Fold 1 Indices als Testdaten benutzen und die restlichen zum Training. Damit das ein 
                    bisschen verständlicher ist, kannst du Code schreiben, der uns alle Indizes ausgibt die zum Fold 1 gehören und dann noch die restlichen.</p>
                <p>Tipps:</p>
                <ul>
                    <li>Verwende <code>which</code>, um die Indizes zu finden.</li>
                    <li>Nutze etwas wie <code>folds == 1</code>.</li>
            </div>

            <div class="page" data-page="3">
                <h1>10-fache Kreuzvalidierung - Fold 2</h1>
                <p>Lösung:</p>
                <pre>
test_indices = which(folds == 1)
train_indices = which(folds != 1)

cat("Testdaten-Indices:", test_indices, "\n")
cat("Trainingsdaten-Indices:", train_indices, "\n")
                </pre>
                <p>Wir können uns zum Vergleich mal den zweiten Fold anschauen</p>
                <pre>
test_indices = which(folds == 2)
train_indices = which(folds != 2)

cat("Testdaten-Indices:", test_indices, "\n")
cat("Trainingsdaten-Indices:", train_indices, "\n")
                </pre>
                <p>Du kannst mal eine for Schleife bauen, die jeden Fold ausgibt, also wie die Testsatzmenge und Trainingsdatenmenge aussieht.</p>
            </div>

            <div class="page" data-page="4">
                <h1>10-fache Kreuzvalidierung - Abschluss</h1>
                <p>Lösung:</p>
                <pre>
for (k in 1:10) {
  test_indices = which(folds == k)
  train_indices = which(folds != k)
  cat("Fold", k, "\n")
  cat("  Testdaten-Indices:", test_indices, "\n")
  cat("  Trainingsdaten-Indices:", train_indices, "\n")
}
                </pre>
                <p>Wenn du jetzt genau hinschaust wurde am Ende der 10-fachen Kreuzvalidierung jeder Datenpunkt genau einmal als Testdaten genutzt.
                    Sooo können wir unsere Modelle optimal trainieren, da wir sie mit den selben Datensatz statt einmal, sogar hier 10mal trainieren konnten,
                    das ist super praktisch wenn unsere Datenmenge gering ist. Unnnnd damit es nochmal verständlicher ist, mit den Testdaten führen wir bspw. Regression
                    durch, in der wir versuchen eine Linie durch unsere Daten zu ziehen, danach führen wir die Linie nochmal durch unsere Testdaten und schauen wie groß der
                    Fehler dort ist. Desto öfter wir das machen, desto besser kann unsere Abschätzung für die optimale Linie sein, wenn wir dem Modell dann bspw. komplett neue Daten geben.
                    Aber jaaa, hoffentlich hast du das prinzip der Kreuzvalidierung jetzt halbwegs verstanden, ist wirklich nicht soo schwer wenn man sich einmal reingedacht hat aber jaaa,
                    tschauuu :]
                </p>
            </div>

            <div class="navigation">
                <button class="nav-button" id="prevButton">Zurück</button>
                <button class="nav-button" id="nextButton">Weiter</button>
                <a href="../index.html" class="nav-button">Zum Kalender</a>
            </div>
        </div>

        <script>
            function createSnowflakes() {
                const snowContainer = document.getElementById('snowContainer');
                for (let i = 0; i < 100; i++) {
                    const snowflake = document.createElement('div');
                    snowflake.classList.add('snowflake');
                    snowflake.style.left = Math.random() * 100 + 'vw';
                    snowflake.style.width = Math.random() * 3 + 1 + 'px';
                    snowflake.style.height = snowflake.style.width;
                    snowflake.style.animationDuration = (Math.random() * 10 + 5) + 's';
                    snowflake.style.animationDelay = Math.random() * -10 + 's';
                    snowContainer.appendChild(snowflake);
                }
            }

            createSnowflakes();

            const pages = document.querySelectorAll('.page');
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            let currentPage = 1;

            function updateButtons() {
                prevButton.disabled = currentPage === 1;
                nextButton.disabled = currentPage === pages.length;
            }

            function showPage(pageNumber) {
                pages.forEach(page => page.classList.remove('active'));
                document.querySelector(`[data-page="${pageNumber}"]`).classList.add('active');
                currentPage = pageNumber;
                updateButtons();
            }

            prevButton.addEventListener('click', () => {
                if (currentPage > 1) {
                    showPage(currentPage - 1);
                }
            });

            nextButton.addEventListener('click', () => {
                if (currentPage < pages.length) {
                    showPage(currentPage + 1);
                }
            });

            updateButtons();
        </script>
    </body>
</html>
