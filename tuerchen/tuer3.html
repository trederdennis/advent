<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Adventskalender - Tür</title>
        <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
    
            body {
                background: url('background.jpeg');
                background-size: cover;
                background-position: center center;
                background-repeat: no-repeat;
                background-attachment: fixed; /* Wichtig für Responsiveness */
                font-family: 'Mountains of Christmas', cursive;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 20px;
                color: #ffffff;
                overflow-x: hidden;
            }
    
            .snow {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                pointer-events: none;
                z-index: 1;
            }
    
            .snowflake {
                position: absolute;
                background: white;
                border-radius: 50%;
                opacity: 0.8;
                animation: fall linear infinite;
            }
    
            @keyframes fall {
                to {
                    transform: translateY(100vh) rotate(720deg);
                }
            }
    
            .content {
                position: relative;
                z-index: 2;
                text-align: center;
                max-width: 800px;
                padding: 20px;
                background: rgba(0, 0, 0, 0.656);
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            }
    
            h1 {
                color: #E0E7FF;
                font-size: 2em;
                font-weight: 700;
                text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
                margin-bottom: 20px;
            }
    
            p {
                color: #c9ddf7;
                font-size: 1.2em;
                font-weight: 400;
                margin-bottom: 10px;
                text-align: left;
            }
    
            ul {
                color: #c9ddf7;
                font-size: 1em;
                font-weight: 400;
                margin-left: 40px;
                margin-bottom: 20px;
                text-align: left;
            }
    
            li {
                margin-bottom: 10px;
            }
    
            .navigation {
                display: flex;
                gap: 20px;
                justify-content: center;
                margin-top: 20px;
            }
    
            .nav-button {
                padding: 10px 20px;
                font-size: 1.2em;
                color: #E0E7FF;
                text-decoration: none;
                background: rgba(255, 255, 255, 0.2);
                border: none;
                border-radius: 10px;
                cursor: pointer;
                transition: all 0.3s ease;
            }
    
            .nav-button:hover {
                background: rgba(255, 255, 255, 0.5);
                transform: scale(1.05);
            }
    
            .nav-button:disabled {
                opacity: 0.5;
                cursor: not-allowed;
                transform: none;
            }
    
            .page {
                display: none;
            }
    
            .page.active {
                display: block;
            }
        </style>
<body>
    <div class="snow" id="snowContainer"></div>
    <div class="content">
        <div class="page active" data-page="1">
            <h1>Türchen 3: Mutation</h1>
            <p>Hallö, das dritte Türchen geht um die "Mutation". Wir wollen eine Funktion bauen, die eine Sequenz verändern kann. Zum Start kannst du dir wieder eine zufällige Sequenz generieren, mit den Code aus Türchen 1 oder wir nehmen Beispielhaft diese:</p>
            <pre>
# Beispiel Sequenz                
sequence = "ACGTACGTACGT"
cat("Originale Sequenz:", sequence)
            </pre>

            <p>Als nächstes könntest du dir überlegen wie wir das Problem in kleine Teilprobleme teilen könnten. Ich hab mir beispielhaft 4 kleine Schritte überlegt für die Funktion. Der erste wäre: "Position auswählen" die wir mutieren, vllt. fällt dir maybe so ein was man danach noch umsetzen muss. Aber joaaa, auf der nächsten page gehts dann los :)</p>
        </div>

        <div class="page" data-page="2">
            <h1>Mutation - Seite 2</h1>
            <p>Alsoooo, ich hab mir folgenden Frame für die Funktion überlegt:</p>
            <pre>
mutate_point = function(sequence) {
    position = ?  # Zufällige Position auswählen
    original_base = ?
    new_base = ? 
    mutated_sequence = ? # Original Base durch neue ersetzen
        
    return(mutated_sequence)
    }                
            </pre>
            <p>Die Funktion muss also zuerst zufällig die Position bestimmen, dann die Base an der Position auswählen, als nächstes die Base wählen zu der wir mutieren wollen. Dann die Sequenz verändern.</p>
            <p>Wir können also erstmal mit den Position bestimmen starten.</p>
            <p>Tipps:</p>
            <ul>
                <li>Wir brauchen dafür die sample() und nchar() Funktion</li>
            </ul>
            <p>Auf der nächsten page gibt es dann dazu die Lösung :) </p>
        </div>

        <style>
            pre {
                background-color: #d8d8d814;
                border: 1px solid #ddd;
                border-radius: 4px;
                padding: 10px;
                font-family: 'Courier New', monospace;
                white-space: pre-wrap;
                word-wrap: break-word;
                text-align: left;
                margin: 10px 0;
                font-size: 0.8em;
                line-height: 1.4;
            }
        </style>
        
        <div class="page" data-page="3">
            <h1>Mutation - Seite 3</h1>
            <p>Lösung:</p>
            
            <pre>
position = sample(1:nchar(original_sequence), 1)
print(position)
            </pre>
        <p>Diesen können wir dann schonmal in unseren Funktion Frame übernehmen:</p>
            <pre> 
mutate_point = function(sequence) {
    position = sample(1:nchar(original_sequence), 1)
    original_base = ?
    new_base = ? 
    mutated_sequence = ? # Original Base durch neue ersetzen
        
    return(mutated_sequence)
    }
            </pre>

        <p>Soooo als nächstes, wollen wir die Base bestimmen die an dieser Position liegt.</p>
        <p>Tipps:</p>
        <ul>
            <li>Die substr() Funktion zusammen mit der position sollte klappen</li>
        </ul>
        </div>


        <div class="page" data-page="4">
            <h1>Mutation - Seite 4</h1>
            <p>Lösung:</p>  
            <pre>
original_base = substr(original_sequence, position, position)
cat("Originale Base:", original_base)
            </pre>
            <p>Eingebaut in unseren Frame, also:</p>
            <pre>
mutate_point = function(sequence) {
    position = sample(1:nchar(original_sequence), 1)
    original_base = original_base = substr(original_sequence, position, position)
    new_base = ? 
    mutated_sequence = ? # Original Base durch neue ersetzen
        
    return(mutated_sequence)
    }
            </pre>
            <p>Fast geschafft, jetzt wollen wir die Base bestimmen zu der mutiert wird.</p>
            <p>Tipps:</p>
            <ul>
                <li>setdiff() benutzen zusammen mit einer Liste der 4 Basen, damit nicht zur selben Base mutiert wird</li>
                <li>sample() auf die restlichen 3 Basen anwenden</li>
            </ul>
        </div>

        <div class="page" data-page="5">
            <h1>Mutation - Seite 5</h1>
            <p>Lösung:</p>  
            <pre>
new_base = sample(setdiff(c("A", "C", "G", "T"), original_base), 1)
cat("Neue Base:", new_base)
            </pre>
            
            <p>Uuuuund wieder eingebaut:</p>
            <pre>
mutate_point = function(sequence) {
    position = sample(1:nchar(original_sequence), 1)
    original_base = original_base = substr(original_sequence, position, position)
    new_base = sample(setdiff(c("A", "C", "G", "T"), original_base), 1) 
    mutated_sequence = ? # Original Base durch neue ersetzen
        
    return(mutated_sequence)
    }  
            </pre>
            <p>woooow, nur noch ein Schritt, der jetzt ein bisschen schwieriger wird. Um jetzt die neue Base einzufügen, bzw. die alte zu entfernen. Können wir versuchen unsere Sequenz an der stelle zu teilen wo die Mutation stattfinden soll. Bzw. genauer wollen wir genau nur vor/hinter der position die wir bestimmt haben den string haben und in die Lücke dann die neue Base einfügen und das dann zu einen neuen String/Sequenz machen.</p>
            <p>Tipps:</p>
            <ul>
                <li>substr() benutzen für einen before (-1) und einen after (+1) string zusammen mit der position</li>
                <li>mithilfe von paste0() kann man die strings dann wieder zusammenfügen</li>
            </ul>
        </div>

        <div class="page" data-page="6">
            <h1>Mutation - Seite 6</h1>
            <p>Lösung:</p>  
            <pre>
# Schritt 1:
before = substr(original_sequence, 1, position - 1)  # Teil vor der Mutation
after = substr(original_sequence, position + 1, nchar(original_sequence))  # Teil nach der Mutation

cat("Teil vor der Mutation:", before)
cat("Teil nach der Mutation:", after)

# Schritt 2:
mutated_sequence = paste0(before, new_base, after) # Sequenzen zusammefügen
print(mutated_sequence)
            </pre>
            <p>Wenn wir das in die Funktion einbauen, können wir das auch ein bisschen kompakter schreiben:</p>
            <pre>
mutate_point = function(sequence) {
    position = sample(1:nchar(original_sequence), 1)
    original_base = original_base = substr(original_sequence, position, position)
    new_base = sample(setdiff(c("A", "C", "G", "T"), original_base), 1) 
    mutated_sequence = paste0(substr(sequence, 1, position - 1),new_base,substr(sequence, position + 1, nchar(sequence)))
    
    return(mutated_sequence)
    }             
    
# Funktion testen
mutated_sequence = mutate_point(sequence)
cat("Nach Punktmutation:", mutated_sequence)
            </pre>
            <p>jup, das wars wieder. Hab es diesmal ein bisschen Kleinteiliger gemacht. Wars so besser idk, ja? brauch feedback aaahhh, hilfe. Aber ja hoffentlich hast du es hinbekommen. Du könntest jetzt noch eine Funktion schreiben die nicht nur einen Punkt mutiert, in dem wir diese Funktion einfach mehrfach aufrufen und als "Helper" benutzen, aber jaa, da kannst du ein bisschen rumüberlegen wenn du willst, bzw zeit hast, bzw. tschauui :]</p>
        </div>


        <div class="navigation">
            <button class="nav-button" id="prevButton">Zurück</button>
            <button class="nav-button" id="nextButton">Weiter</button>
            <a href="../index.html" class="nav-button">Zum Kalender</a>
        </div>
    </div>

    <script>
        function optimizeBackgroundImage() {
        const body = document.body;
        const img = new Image();
        img.src = 'tuerchen/background.jpeg';
        
        img.onload = function() {
            const aspectRatio = img.width / img.height;
            const windowAspectRatio = window.innerWidth / window.innerHeight;
            
            if (aspectRatio > windowAspectRatio) {
                // Wenn das Bild breiter ist als der Bildschirm
                body.style.backgroundSize = 'auto 100%';
            } else {
                // Wenn das Bild höher ist als der Bildschirm
                body.style.backgroundSize = '100% auto';
            }
        };

        // Aktualisiere bei Größenänderung des Fensters
        window.addEventListener('resize', optimizeBackgroundImage);
    }
        function createSnowflakes() {
            const snowContainer = document.getElementById('snowContainer');
            for (let i = 0; i < 100; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                snowflake.style.left = Math.random() * 100 + 'vw';
                snowflake.style.width = Math.random() * 3 + 1 + 'px';
                snowflake.style.height = snowflake.style.width;
                snowflake.style.animationDuration = (Math.random() * 10 + 5) + 's';
                snowflake.style.animationDelay = Math.random() * -10 + 's';
                snowContainer.appendChild(snowflake);
            }
        }

        createSnowflakes();

        // Navigation Logic
        const pages = document.querySelectorAll('.page');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        let currentPage = 1;

        function updateButtons() {
            prevButton.disabled = currentPage === 1;
            nextButton.disabled = currentPage === pages.length;
        }

        function showPage(pageNumber) {
            pages.forEach(page => page.classList.remove('active'));
            document.querySelector(`[data-page="${pageNumber}"]`).classList.add('active');
            currentPage = pageNumber;
            updateButtons();
        }

        prevButton.addEventListener('click', () => {
            if (currentPage > 1) {
                showPage(currentPage - 1);
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentPage < pages.length) {
                showPage(currentPage + 1);
            }
        });

        updateButtons();
    </script>
</body>
</html>
